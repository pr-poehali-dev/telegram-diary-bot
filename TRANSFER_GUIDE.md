# üì¶ –ì–∞–π–¥ –ø–æ –ø–µ—Ä–µ–Ω–æ—Å—É –ï–∂–µ–¥–Ω–µ–≤–Ω–∏–∫–∞ –≤ access-bars-service

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è (–≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):

1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã (–≤–ª–∞–¥–µ–ª—å—Ü—ã –∏ –∫–ª–∏–µ–Ω—Ç—ã)
2. **services** - —É—Å–ª—É–≥–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏
3. **clients** - –∫–ª–∏–µ–Ω—Ç—ã (—Å–≤—è–∑—å —Å users)
4. **bookings** - –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —É—Å–ª—É–≥–∏
5. **calendar_events** - –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
6. **week_schedule** - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—á—ë–±—ã –ø–æ –Ω–µ–¥–µ–ª—è–º (2-–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª)
7. **blocked_dates** - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã
8. **settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏:
```
users (–≤–ª–∞–¥–µ–ª–µ—Ü)
  ‚îú‚îÄ‚Üí services (—É—Å–ª—É–≥–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îú‚îÄ‚Üí clients (–∫–ª–∏–µ–Ω—Ç—ã –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îú‚îÄ‚Üí bookings (–∑–∞–ø–∏—Å–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îú‚îÄ‚Üí calendar_events (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îú‚îÄ‚Üí week_schedule (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îú‚îÄ‚Üí blocked_dates (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
  ‚îî‚îÄ‚Üí settings (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞)

bookings
  ‚îú‚îÄ‚Üí clients (–∫—Ç–æ –∑–∞–ø–∏—Å–∞–ª—Å—è)
  ‚îú‚îÄ‚Üí services (–Ω–∞ –∫–∞–∫—É—é —É—Å–ª—É–≥—É)
  ‚îî‚îÄ‚Üí calendar_events (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - —Å–≤—è–∑—å —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ–º)
```

---

## üìã –§–∞–π–ª—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### Frontend (–∏–∑ `/src`):

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`/src/components/`):
- `ScheduleTab.tsx` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- `WorldSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- `CycleManager.tsx` - –º–µ–Ω–µ–¥–∂–µ—Ä —Ü–∏–∫–ª–æ–≤ —É—á—ë–±—ã
- `ConflictManager.tsx` - –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- `BookingManager.tsx` - –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ø–∏—Å–µ–π
- `EventManager.tsx` - –º–µ–Ω–µ–¥–∂–µ—Ä –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `BlockedDateManager.tsx` - –º–µ–Ω–µ–¥–∂–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

#### –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã (`/src/contexts/`):
- `ScheduleContext.tsx` - –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫–æ–º

#### –•—É–∫–∏ (`/src/hooks/`):
- `useBookings.ts` - —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–ø–∏—Å—è–º–∏
- `useEvents.ts` - —Ä–∞–±–æ—Ç–∞ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏  
- `useBlockedDates.ts` - —Ä–∞–±–æ—Ç–∞ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏
- `useWeekSchedule.ts` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —É—á—ë–±—ã
- `useConflicts.ts` - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- `useSettings.ts` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

#### –¢–∏–ø—ã (`/src/types/`):
- `schedule.ts` - —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

### Backend (–∏–∑ `/backend`):
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏–∫–æ–º –ø–∞–ø–∫–∏:
- `/backend/bookings/` - CRUD –∑–∞–ø–∏—Å–µ–π
- `/backend/events/` - CRUD –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `/backend/blocked-dates/` - CRUD –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- `/backend/conflicts/` - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- `/backend/week-schedule/` - CRUD —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —É—á—ë–±—ã
- `/backend/settings/` - CRUD –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## ‚öôÔ∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–≤–ª–∞–¥–µ–ª—å—Ü–∞ (owner):
```sql
INSERT INTO users (telegram_id, role, name, phone, email, created_at)
VALUES (123456789, 'owner', '–ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞', '+79001234567', 'email@example.com', CURRENT_TIMESTAMP);
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ö–æ—Ç—è –±—ã 1 —É—Å–ª—É–≥—É:
```sql
INSERT INTO services (owner_id, name, duration_minutes, price, active, created_at)
VALUES (1, 'Access Bars —Å–µ–∞–Ω—Å', 60, 3000, true, CURRENT_TIMESTAMP);
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```sql
INSERT INTO settings (owner_id, key, value)
VALUES 
  (1, 'work_start_time', '09:00'),
  (1, 'work_end_time', '20:00'),
  (1, 'booking_interval_minutes', '30');
```

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BookingForm

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `BookingForm.tsx`:

**–ë—ã–ª–æ:**
```typescript
// –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π API
fetch(SCHEDULE_API_URL, { method: 'POST', body: JSON.stringify(data) })
```

**–°—Ç–∞–Ω–µ—Ç:**
```typescript
// –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π backend –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫–∞
import { useBookings } from '@/hooks/useBookings';

const { addBooking } = useBookings();

// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Ñ–æ—Ä–º—ã:
await addBooking({
  clientName: formData.name,
  clientPhone: formData.phone,
  clientEmail: formData.email,
  serviceId: formData.service,
  date: formData.date,
  startTime: formData.time,
  status: 'pending'
});
```

---

## üõ£Ô∏è –†–æ—É—Ç–∏–Ω–≥ (–¥–æ–±–∞–≤–∏—Ç—å –≤ `App.tsx`):

```typescript
// –ò–º–ø–æ—Ä—Ç—ã
import ScheduleTab from './components/ScheduleTab';
import WorldSettings from './components/WorldSettings';
import { ScheduleProvider } from './contexts/ScheduleContext';

// –í —Ä–æ—É—Ç–∏–Ω–≥–µ:
<Route 
  path="/schedule" 
  element={
    <ScheduleProvider>
      <ScheduleTab />
    </ScheduleProvider>
  } 
/>

<Route 
  path="/admin/schedule-settings" 
  element={
    <ProtectedRoute>
      <ScheduleProvider>
        <WorldSettings />
      </ScheduleProvider>
    </ProtectedRoute>
  } 
/>
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞

### –í —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ (–ï–∂–µ–¥–Ω–µ–≤–Ω–∏–∫):
- [x] –ò–∑—É—á–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- [ ] –°–æ–∑–¥–∞–Ω—ã SQL –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –í –ø–µ—Ä–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ (access-bars-service):
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã SQL –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ `/src/components`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏–∑ `/src/contexts`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ö—É–∫–∏ –∏–∑ `/src/hooks`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ç–∏–ø—ã –∏–∑ `/src/types`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã backend —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `/backend`
- [ ] –ó–∞–ø—É—â–µ–Ω `sync_backend`
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω `BookingForm.tsx`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–æ—É—Ç—ã –≤ `App.tsx`
- [ ] –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≤–ª–∞–¥–µ–ª–µ—Ü
- [ ] –°–æ–∑–¥–∞–Ω—ã —É—Å–ª—É–≥–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ access-bars-service –±—É–¥–µ—Ç:
1. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** –Ω–∞ `/schedule` - –ø–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —É—á—ë–±—ã
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** –Ω–∞ `/admin/schedule-settings` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - `BookingForm` —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫–µ
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—å

---

## üìû –°—Å—ã–ª–∫–∏

- **–ï–∂–µ–¥–Ω–µ–≤–Ω–∏–∫ GitHub**: [–ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞]
- **Access Bars GitHub**: https://github.com/BEvgeniyB/access-bars-service
